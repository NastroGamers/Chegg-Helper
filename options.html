<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Chegg Helper - Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="src/styles.css" />
    <style>
      /* Options page specific styles using design system variables */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: var(--chx-font-sans);
        background: var(--chx-gray-50);
        color: var(--chx-gray-900);
        font-size: var(--chx-font-size-base);
        line-height: var(--chx-line-height-normal);
        padding: 0;
        margin: 0;
        min-height: 100vh;
      }

      .options-container {
        max-width: 900px;
        margin: 0 auto;
        padding: var(--chx-space-8) var(--chx-space-6);
      }

      /* Header */
      .options-header {
        background: var(--chx-gradient-primary);
        border-radius: var(--chx-radius-xl);
        padding: var(--chx-space-8);
        margin-bottom: var(--chx-space-6);
        box-shadow: var(--chx-shadow-lg);
        color: white;
        position: relative;
        overflow: hidden;
      }

      .options-header::before {
        content: '';
        position: absolute;
        top: -30%;
        right: -10%;
        width: 300px;
        height: 300px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
      }

      .options-header-content {
        position: relative;
        z-index: var(--chx-z-base);
      }

      .options-title {
        font-size: var(--chx-font-size-3xl);
        font-weight: var(--chx-font-weight-bold);
        margin-bottom: var(--chx-space-2);
        display: flex;
        align-items: center;
        gap: var(--chx-space-3);
      }

      .options-subtitle {
        font-size: var(--chx-font-size-lg);
        opacity: 0.95;
        font-weight: var(--chx-font-weight-normal);
      }

      /* Card */
      .options-card {
        background: white;
        border-radius: var(--chx-radius-xl);
        padding: var(--chx-space-8);
        margin-bottom: var(--chx-space-6);
        box-shadow: var(--chx-shadow-md);
        border: 1px solid var(--chx-gray-300);
        transition: all var(--chx-transition-base);
      }

      .options-card:hover {
        box-shadow: var(--chx-shadow-lg);
      }

      .options-card-header {
        display: flex;
        align-items: center;
        gap: var(--chx-space-3);
        margin-bottom: var(--chx-space-5);
        padding-bottom: var(--chx-space-4);
        border-bottom: 2px solid var(--chx-gray-100);
      }

      .options-card-icon {
        width: 56px;
        height: 56px;
        background: linear-gradient(135deg, var(--chx-primary-light), var(--chx-primary));
        border-radius: var(--chx-radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--chx-font-size-3xl);
        box-shadow: var(--chx-shadow-sm);
      }

      .options-card-heading {
        flex: 1;
      }

      .options-card-title {
        font-size: var(--chx-font-size-2xl);
        font-weight: var(--chx-font-weight-semibold);
        color: var(--chx-gray-900);
        margin-bottom: var(--chx-space-1);
      }

      .options-card-desc {
        font-size: var(--chx-font-size-base);
        color: var(--chx-gray-600);
      }

      /* Form Elements */
      .options-form-group {
        margin-bottom: var(--chx-space-6);
      }

      .options-form-group:last-child {
        margin-bottom: 0;
      }

      .options-label {
        display: block;
        font-size: var(--chx-font-size-base);
        font-weight: var(--chx-font-weight-semibold);
        color: var(--chx-gray-900);
        margin-bottom: var(--chx-space-2);
      }

      .options-label-desc {
        font-size: var(--chx-font-size-sm);
        color: var(--chx-gray-600);
        font-weight: var(--chx-font-weight-normal);
        margin-top: var(--chx-space-1);
        display: block;
      }

      .options-label-desc a {
        color: var(--chx-primary);
        text-decoration: none;
        font-weight: var(--chx-font-weight-semibold);
      }

      .options-label-desc a:hover {
        text-decoration: underline;
      }

      .options-label-desc a:focus-visible {
        outline: 2px solid var(--chx-primary);
        outline-offset: 2px;
        border-radius: var(--chx-radius-sm);
      }

      .options-input {
        width: 100%;
        padding: var(--chx-space-3) var(--chx-space-4);
        border: 1px solid var(--chx-gray-400);
        border-radius: var(--chx-radius-base);
        font-size: var(--chx-font-size-base);
        font-family: var(--chx-font-mono);
        transition: all var(--chx-transition-fast);
        background: white;
        color: var(--chx-gray-900);
      }

      .options-input:hover {
        border-color: var(--chx-gray-500);
      }

      .options-input:focus {
        outline: none;
        border-color: var(--chx-primary);
        box-shadow: var(--chx-focus-ring);
      }

      .options-input:disabled {
        background: var(--chx-gray-100);
        cursor: not-allowed;
        opacity: 0.6;
      }

      .options-input::placeholder {
        color: var(--chx-gray-500);
      }

      /* Info Box */
      .options-info-box {
        background: var(--chx-info-bg);
        border: 2px solid var(--chx-info-light);
        border-radius: var(--chx-radius-base);
        padding: var(--chx-space-4);
        margin-top: var(--chx-space-4);
        font-size: var(--chx-font-size-sm);
        line-height: var(--chx-line-height-relaxed);
      }

      .options-info-box-title {
        font-weight: var(--chx-font-weight-semibold);
        color: var(--chx-info);
        margin-bottom: var(--chx-space-2);
        display: flex;
        align-items: center;
        gap: var(--chx-space-2);
        font-size: var(--chx-font-size-base);
      }

      .options-info-box a {
        color: var(--chx-info);
        font-weight: var(--chx-font-weight-semibold);
      }

      /* Button Group */
      .options-btn-group {
        display: flex;
        gap: var(--chx-space-3);
        flex-wrap: wrap;
        justify-content: flex-end;
        margin-top: var(--chx-space-6);
      }

      .options-btn {
        padding: var(--chx-space-3) var(--chx-space-5);
        border-radius: var(--chx-radius-base);
        border: none;
        font-size: var(--chx-font-size-base);
        font-weight: var(--chx-font-weight-semibold);
        cursor: pointer;
        transition: all var(--chx-transition-fast);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--chx-space-2);
        white-space: nowrap;
        font-family: var(--chx-font-sans);
        position: relative;
        overflow: hidden;
      }

      .options-btn:focus-visible {
        outline: none;
        box-shadow: var(--chx-focus-ring);
      }

      .options-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .options-btn-primary {
        background: var(--chx-gradient-primary);
        color: white;
        box-shadow: var(--chx-shadow-md);
      }

      .options-btn-primary:hover:not(:disabled) {
        background: var(--chx-primary-hover);
        transform: translateY(-1px);
        box-shadow: var(--chx-shadow-lg);
      }

      .options-btn-primary:active {
        transform: translateY(0);
      }

      .options-btn-secondary {
        background: white;
        color: var(--chx-gray-700);
        border: 1px solid var(--chx-gray-400);
        box-shadow: var(--chx-shadow-xs);
      }

      .options-btn-secondary:hover:not(:disabled) {
        background: var(--chx-gray-50);
        border-color: var(--chx-primary);
        box-shadow: var(--chx-shadow-sm);
      }

      .options-btn-success {
        background: var(--chx-gradient-success);
        color: white;
        box-shadow: var(--chx-shadow-md);
      }

      .options-btn-success:hover:not(:disabled) {
        background: var(--chx-gradient-success-hover);
        transform: translateY(-1px);
        box-shadow: var(--chx-shadow-lg);
      }

      .options-btn-danger {
        background: var(--chx-error);
        color: white;
        box-shadow: var(--chx-shadow-md);
      }

      .options-btn-danger:hover:not(:disabled) {
        background: var(--chx-error-light);
        transform: translateY(-1px);
        box-shadow: var(--chx-shadow-lg);
      }

      /* Loading State */
      .options-btn.is-loading {
        color: transparent;
        pointer-events: none;
      }

      .options-btn.is-loading::after {
        content: "";
        position: absolute;
        width: 18px;
        height: 18px;
        top: 50%;
        left: 50%;
        margin-left: -9px;
        margin-top: -9px;
        border: 2px solid currentColor;
        border-radius: 50%;
        border-right-color: transparent;
        animation: chx-spin 0.6s linear infinite;
        color: white;
      }

      .options-btn-secondary.is-loading::after {
        color: var(--chx-gray-700);
      }

      /* Status Message */
      .options-status {
        padding: var(--chx-space-3) var(--chx-space-4);
        border-radius: var(--chx-radius-base);
        font-size: var(--chx-font-size-base);
        margin-top: var(--chx-space-4);
        display: none;
        align-items: center;
        gap: var(--chx-space-2);
        font-weight: var(--chx-font-weight-medium);
      }

      .options-status.visible {
        display: flex;
      }

      .options-status.success {
        background: var(--chx-success-bg);
        color: var(--chx-success);
        border: 2px solid var(--chx-success-light);
      }

      .options-status.error {
        background: var(--chx-error-bg);
        color: var(--chx-error);
        border: 2px solid var(--chx-error-light);
      }

      .options-status.info {
        background: var(--chx-info-bg);
        color: var(--chx-info);
        border: 2px solid var(--chx-info-light);
      }

      .options-status-icon {
        font-size: var(--chx-font-size-lg);
      }

      /* File Input Wrapper */
      .options-file-input-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
      }

      .options-file-input-wrapper input[type="file"] {
        position: absolute;
        left: -9999px;
      }

      /* Footer */
      .options-footer {
        text-align: center;
        padding: var(--chx-space-6);
        color: var(--chx-gray-600);
        font-size: var(--chx-font-size-sm);
      }

      .options-footer-link {
        color: var(--chx-primary);
        text-decoration: none;
        font-weight: var(--chx-font-weight-semibold);
      }

      .options-footer-link:hover {
        text-decoration: underline;
      }

      .options-footer-link:focus-visible {
        outline: 2px solid var(--chx-primary);
        outline-offset: 2px;
        border-radius: var(--chx-radius-sm);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .options-container {
          padding: var(--chx-space-4);
        }

        .options-card {
          padding: var(--chx-space-5);
        }

        .options-btn-group {
          flex-direction: column;
        }

        .options-btn {
          width: 100%;
        }

        .options-card-header {
          flex-direction: column;
          align-items: flex-start;
        }
      }

      /* Code */
      code {
        background: rgba(0, 0, 0, 0.05);
        padding: 2px var(--chx-space-2);
        border-radius: var(--chx-radius-sm);
        font-family: var(--chx-font-mono);
        font-size: var(--chx-font-size-sm);
        color: var(--chx-error);
      }
    </style>
  </head>
  <body>
    <div class="options-container" role="main">
      <!-- Header -->
      <header class="options-header" role="banner">
        <div class="options-header-content">
          <h1 class="options-title">
            ‚öôÔ∏è Chegg Helper Settings
          </h1>
          <p class="options-subtitle">Configure your extension preferences and API keys</p>
        </div>
      </header>

      <!-- API Configuration Card -->
      <section class="options-card" aria-labelledby="api-config-title">
        <div class="options-card-header">
          <div class="options-card-icon" aria-hidden="true">üîë</div>
          <div class="options-card-heading">
            <h2 class="options-card-title" id="api-config-title">API Configuration</h2>
            <p class="options-card-desc">Set up your DeepSeek API key for AI features</p>
          </div>
        </div>

        <div class="options-form-group">
          <label for="deepseekKey" class="options-label">
            DeepSeek API Key
            <span class="options-label-desc">
              Get your API key from <a href="https://platform.deepseek.com" target="_blank" rel="noopener noreferrer">platform.deepseek.com</a>
            </span>
          </label>
          <input
            id="deepseekKey"
            type="password"
            class="options-input"
            placeholder="sk-..."
            aria-describedby="api-key-info"
            autocomplete="off"
          />
        </div>

        <div class="options-info-box" id="api-key-info" role="region" aria-label="API key instructions">
          <div class="options-info-box-title">
            üí° How to get your DeepSeek API key
          </div>
          <ol style="margin-left: var(--chx-space-5); margin-top: var(--chx-space-2);">
            <li>Visit <a href="https://platform.deepseek.com" target="_blank" rel="noopener noreferrer">platform.deepseek.com</a></li>
            <li>Sign up or log in to your account</li>
            <li>Navigate to API Keys section</li>
            <li>Create a new API key and copy it here</li>
          </ol>
        </div>

        <div class="options-btn-group">
          <button id="save" class="options-btn options-btn-success" aria-label="Save API key settings">
            <span aria-hidden="true">üíæ</span>
            <span>Save Settings</span>
          </button>
          <button id="test" class="options-btn options-btn-secondary" aria-label="Test API connection">
            <span aria-hidden="true">üß™</span>
            <span>Test Connection</span>
          </button>
        </div>

        <div id="status" class="options-status" role="status" aria-live="polite">
          <span class="options-status-icon"></span>
          <span class="options-status-text"></span>
        </div>
      </section>

      <!-- Custom Prompts Card -->
      <section class="options-card" aria-labelledby="prompts-title">
        <div class="options-card-header">
          <div class="options-card-icon" aria-hidden="true">üìù</div>
          <div class="options-card-heading">
            <h2 class="options-card-title" id="prompts-title">Custom Prompts</h2>
            <p class="options-card-desc">Manage your saved prompts and templates</p>
          </div>
        </div>

        <div class="options-btn-group">
          <button id="exportPrompts" class="options-btn options-btn-secondary" aria-label="Export all custom prompts">
            <span aria-hidden="true">üì§</span>
            <span>Export Prompts</span>
          </button>
          <div class="options-file-input-wrapper">
            <button class="options-btn options-btn-secondary" aria-label="Import prompts from file">
              <span aria-hidden="true">üì•</span>
              <span>Import Prompts</span>
            </button>
            <input type="file" id="importFile" accept="application/json" aria-label="Choose JSON file to import" />
          </div>
          <button id="clearPrompts" class="options-btn options-btn-danger" aria-label="Clear all custom prompts">
            <span aria-hidden="true">üóëÔ∏è</span>
            <span>Clear All</span>
          </button>
        </div>

        <div id="promptCount" class="options-status info visible" role="status" aria-live="polite">
          <span class="options-status-icon" aria-hidden="true">üìä</span>
          <span class="options-status-text">Loading prompts...</span>
        </div>
      </section>

      <!-- Footer -->
      <footer class="options-footer" role="contentinfo">
        Need help? <a href="https://wa.me/918919937369" target="_blank" rel="noopener noreferrer" class="options-footer-link">Contact Support on WhatsApp</a>
      </footer>
    </div>

    <script src="options.js"></script>
  </body>
</html>
